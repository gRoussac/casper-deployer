<h1 style="text-align: center;"><a href="https://casperlabs.io/"><img src="https://raw.githubusercontent.com/gRoussac/casper-deployer/dev/www/apps/frontend/src/assets/logo.svg" width="120" style="position: relative; top:5px" alt="Casper"></a> <b>Deployer</b> - Information and How-To Guides</h1>
<br>

# Welcome to **Casper Deployer**!

# **Casper Blockchain** Hackaton Project October 2022 👻 🎃🕯️

## **Project built with 😘♥💕❤ for Casper Blockchain**

### 🏰 Deployed on [Render](https://render.com/) at [https://casper.onrender.com/ ](casper.onrender) ( beta 🏚️🕸️🕷️)

<hr>

# 📔 **Project**

#### This projects aims to ease interactions with <a href="https://casperlabs.io/"><img  style="position: relative; top:3px" alt="Casper" src="https://user-images.githubusercontent.com/3099551/197350250-b9d5852b-44a6-45bb-a227-e12d6d4166c9.jpg" height="20" width="20" alt="Casper"/> Casper Blockchain</a> during smart contracts development and for regular queries done with the [Casper Client CLI](https://github.com/casper-ecosystem/casper-client-rs)

#### This project relies on [casper-rust-wasm-sdk](https://github.com/casper-ecosystem/casper-rust-wasm-sdk) to help with onboarding developers on the Casper Network and also users by providing better insights on Casper Blockchain concepts (URef, Dictionnaries etc..) and with giving the ability to deploy a smart contract signed with the [Capser Wallet](https://casperwallet.io).

<br />
<img alt="image" src="https://user-images.githubusercontent.com/3099551/197349529-ab5a899b-964f-4089-a6ad-84f059b9e50f.png">

<hr><br />

# ✍️ **Casper Wallet**

> Using Chrome or a Chromium-based browser like Brave ? visit the Casper Wallet Web Store, then download and install [Casper Wallet extension](https://casperwallet.io)

📜 CasperLabs Wallet acts as your CSPR wallet, keeping your accounts and letting you sign deploys on the Casper Network to perform actions like staking, unstaking or sending your tokens to another person or an exchange account.

#

# 🏭 **Tech Stack**

- **Blockchain ⛓️**

  <img alt="Casper" width="100" src="https://user-images.githubusercontent.com/3099551/197353903-d2bdc636-9dcd-4e84-8ba7-6887d59f6b8a.png"/>

- **Frontend 🐇**

  <img alt="Angular" src="https://img.shields.io/badge/angular-%23DD0031.svg?style=for-the-badge&logo=angular&logoColor=white"/>
  <img alt="Nx" src="https://img.shields.io/badge/nx-143055?style=for-the-badge&logo=nx&logoColor=white"/>
  <img alt="NPM" src="https://img.shields.io/badge/NPM-%23000000.svg?style=for-the-badge&logo=npm&logoColor=white"/>
  <img alt="JavaScript" src="https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E"/>
  <img alt="TypeScript" src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white"/>
  <img alt="TailwindCSS" src="https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white"/>
  <img alt="SASS" src="https://img.shields.io/badge/SASS-hotpink.svg?style=for-the-badge&logo=SASS&logoColor=white"/>
  <img alt="Webpack" src="https://img.shields.io/badge/webpack-%238DD6F9.svg?style=for-the-badge&logo=webpack&logoColor=black"/>

- **Backend 🦥**

  <img alt="NestJS" src="https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white"/>
  <img alt="Express.js" src="https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB"/>
  <img alt="NodeJS" src="https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white"/>
  <img alt="JavaScript" src="https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E"/>
  <img alt="TypeScript" src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white"/>
  <img alt="Rust" src="https://img.shields.io/badge/rust-%23000000.svg?style=for-the-badge&logo=rust&logoColor=white"/>
  <img alt="WEBASSEMBLY" src="https://img.shields.io/badge/webassembly-%23000000.svg?style=for-the-badge&logo=wasm&logoColor=white"/>

- **Tests 🧪**

  <img alt="cypress" src="https://img.shields.io/badge/-cypress-%23E5E5E5?style=for-the-badge&logo=cypress&logoColor=058a5e"/>
  <img alt="Jest" src="https://img.shields.io/badge/-jest-%23C21325?style=for-the-badge&logo=jest&logoColor=white"/>

- **🐧**

  <img alt="GitHub" src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white"/>
  <img alt="GitLab CI" src="https://img.shields.io/badge/gitlab%20ci-%23181717.svg?style=for-the-badge&logo=gitlab&logoColor=white"/>
  <img alt="GitHub Actions" src="https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white"/>
  <img alt="Visual Studio Code" src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=visual-studio-code&logoColor=white"/>
  <img alt="Render" src="https://img.shields.io/badge/Render-%46E3B7.svg?style=for-the-badge&logo=render&logoColor=white"/>
  <img alt="Docker" src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white"/>
  <img alt="Debian" src="https://img.shields.io/badge/Debian-D70A53?style=for-the-badge&logo=debian&logoColor=white"/>

- **🎶**

  <img alt="SoundCloud" src="https://img.shields.io/badge/sound%20cloud-FF5500?style=for-the-badge&logo=soundcloud&logoColor=white"/>

#

# 🏗️ **Architecture**

## Web Server

Web server is implemented in [Express.js](https://expressjs.com/).

## Api Server

Api server is implemented in [NestJS](https://nestjs.com/)+ [Nx structure](https://nx.dev/).

## Client

UI is implemented in [Angular.js](https://angular.io/) + [Nx structure](https://nx.dev/).

## Smart contracts

Smart contracts are implemented in [Rust](https://www.rust-lang.org/) + [Casper Smart contract Crate](https://docs.rs/casper-contract/latest/casper_contract/).

## Folders at root directory is as follow :

- casper-rust-wasm-sdk: contains the Casper Rust SDK in two versions, web and nodejs
- docker: contains Docker files
- wasm: contains client wasm files
- www: contains the Web application files

#

# 🐙 **Features**

- Header
  - [✓] Integrate with Casper Wallet
  - [✓] Display active public key and account balance
- Network
  - [✓] Input Network Peer
  - [✓] Select from Network Peers
  - [✓] Check Peer status
  - [✓] Change RPC ending suffix
  - [✓] Retrieve Root State Hash
- Config
  - [✓] Input Root State Hash
  - [✓] Retrieve from Wallet or input Public Key
  - [✓] Retrieve Puse URef associated with Public key
  - [✓] Retrieve Balance associated with Public key
- Transfer
  - [✓] Transfer from active Public Key
  - [✓] Transfer from other Public Key or Purse Uref
  - [✓] Transfer to Public Key
  - [✓] Transfer to Purse Uref
  - [✓] Define Amount to transfer
- Purse
  - [✓] Input Purse URef
  - [✓] Retrieve Balance associated with URef
- State
  - [✓] Input URef / Hash / Deploy Hash / Account Hash
  - [✓] Input Named Key Path
  - [✓] Retrieve State value
- Dictionaries
  - [✓] Input Dictionary item key
  - [✓] Input Dictionary URef
  - [✓] Input Dictionary name
  - [✓] Input Contract hash
  - [✓] Retrieve Dictionary value
- Deploy
  - [✓] Input Chain name
  - [✓] Select from Chain names
  - [✓] Input Public Key
  - [✓] Input Public Key
  - [✓] Input Gas Fee max for a deploy payment
  - [✓] Input Time To Live max for a deploy payment
  - [✓] Select Wasm file (ModuleBytes)
  - [✓] Input Contract or Package name
  - [✓] Input Contract or Package hash
  - [✓] Input Entry point
  - [✓] Input Args
  - [✓] Input Contract or Package as target of the deploy
  - [✓] Input Package version of the deploy
  - [✓] Make deploy
  - [🪲] (bugged) Speculative test deploy
  - [✓] Sign with Wallet and send deploy to network
- Output
  - [✓] Display active query results
- Notes
  - [✓] Dummy notes takedown

#

# 🛣️ Roadmap / Todo / Tofix

- [✓] Add Dictionnary implementation to test smart contracts
- [✓] Add some RPC calls into wasm client side (Rust Wasm SDK)
- [✓] Add Events watchers
- [✓] Re implement Events watchers from the Rust Wasm SDK
- [✓] Casper Wallet integration / private key / deprecate Casper Signer
- [✓] Fix Github workflow
- [ ] Fix blur events on input
- [ ] Fix UI height
- [ ] Refactor Angular forms building
- [ ] Improve Jest coverage
- [ ] Improve Cypress coverage
- [ ] Add Cypress coverage Github action
- [ ] Improve Css consistentcy
- [✓] Fix transfers from URef or non active public key
- [ ] Fix speculative test deploys
- [ ] Add check deploy and size check
- [ ] Add multisignature flow
- [ ] Add delegation / stacking flow ?
- [✓] Upgrading smart contracts
- [ ] Escrow app on /escrow route
- [ ] Add Escrow smart contracts
- [ ] Electron app
- [ ] Load / sign deploy

#

# 🧙‍♀️ **Development**

## Prerequisites

- npm >= 10.2.5
- nodejs >= v20.10.0

This web project was generated and is using

- [Nx](https://nx.dev)

  - [Angular](https://angular.io)
  - [Nest](https://nestjs.com)
  - [Express](https://expressjs.com)

  Runs on

- [Node](https://nodejs.org)

  For tests

- [Jest](https://jestjs.io/)
- [Cypress](https://www.cypress.io/)

  For WebAssembly and Smart contracts on

- [Wasm](https://webassembly.org/)
- [Rust](https://www.rust-lang.org/)

#

# **🐳 Docker**

> Donwload and run image with [docker-compose.yml](./docker/docker-compose.yml) 🏃

```shell
docker-compose -f './docker/docker-compose.yml' up -d
```

### OR

> [Pull](https://hub.docker.com/r/gregoshop/casper-deployer) and run image from https://hub.docker.com/r/gregoshop/casper-deployer 🏃‍♀️

```shell
docker pull gregoshop/casper-deployer
docker container run -t -i --rm -h casper-deployer -p 4200:4200 gregoshop/casper-deployer
```

### OR

> Build and run image with [Dockerfile](./docker/Dockerfile) 🏃‍♂️

```shell
docker build -t casper-deployer ./docker/ --force-rm

docker container run -t -i --rm -h casper-deployer -p 4200:4200 casper-deployer
```

### Navigate to http://localhost:4200/

#

# 🛠️ Usage with npm

## Install

> 📂 Go to `www` folder

```
cd ./www
```

Run `npm install` to install the application.

```shell
npm install
```

## Development server

Run `npm start` for a dev server. Navigate to http://localhost:4200/. The app will automatically reload if you change any of the source files.

```shell
npm start
```

## Development server as production

Run `npm run start:prod` for a dev server with production configuration. Navigate to http://localhost:4200/.

```shell
npm run start:prod
```

## Build

Run `npm run build` to build the project. The build artifacts will be stored in the `dist/` directory.

```shell
npm run build
```

## Running unit tests

Run `npm run test` to execute the unit tests via [Jest](https://jestjs.io).

```shell
npm run test
```

Run `nx affected:test` to execute the unit tests affected by a change.

## Running end-to-end tests

Run `npm run e2e` to execute the end-to-end tests via [Cypress](https://www.cypress.io).

```shell
npm run e2e
```

Run `nx affected:e2e` to execute the end-to-end tests affected by a change.

## 🎠 Configuration

Settings can be changed in [/www/libs/util/config/src/config.ts](./www/libs/util/config/src/config.ts)

Default example settings are

```json
{
  "api_prefix": "/api/",
  "gasFee": "150000000",
  "minimumTransfer": "25000000000",
  "TTL": "30m",
  "idMax": "100000000",
  "gasFeeTransfer": "10000"
}
```

## 📊 Understanding the workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## 🐕‍🦺 Further help

Visit the [Nx Documentation](https://nx.dev/angular) to learn more.

#

# 🚧 Workflow and contributions

⚠️ Work in Progress

https://github.com/gRoussac/casper-deployer/blob/Development-Workflow

### 📝 License

[GNU GENERAL PUBLIC LICENSE](https://github.com/gRoussac/casper-deployer/blob/master/LICENSE.md)

### 🦺 Security

https://github.com/gRoussac/casper-deployer/blob/master/SECURITY.md

### ❓Have questions?

Go to the `#hackathon` channel [on Discord](https://discord.gg/casperblockchain)

### 🪦 Errors ?

If you see any typos or errors you can edit the code directly on GitHub and raise a Pull Request on `dev` branch, many thanks !
